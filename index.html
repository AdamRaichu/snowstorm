<!DOCTYPE html>
<html lang="en">
<head>
	<title>Snowstorm Particle Generator</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="robots" content="noindex">
	<meta name="theme-color" content="#cfd7ea">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,700|Lato:300,400,700|Inconsolata" rel="stylesheet">

	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/fontawesome.css">
	<link rel="stylesheet" href="css/jquery-ui.min.css">
	<link rel="stylesheet" href="css/spectrum.css">
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/style.css">

	<script src="lib/jquery.js"></script>
	<script src="lib/jquery-ui.min.js"></script>
	<script src="lib/vue.min.js"></script>
	<script src="lib/vue-color.min.js"></script>
	<script src="lib/three.js"></script>
	<script src="lib/OrbitControls.js"></script>
	<script src="lib/spectrum.js"></script>
	<script src="lib/file_saver.js"></script>
	<script src="lib/molang.js"></script>
	<script src="js/util.js"></script>

	<script src="js/general.js"></script>
	<script src="js/sidebar_templates.js"></script>
	<script src="js/import.js"></script>
	<script src="js/export.js"></script>
	<script src="js/input.js"></script>
	<script src="js/curves.js"></script>
	<script src="js/preview.js"></script>


</head>
<body spellcheck="false">

	<div id="molang_sheet" class="dialog" style="display: none;">
		<h1>MoLang Sheet</h1>
		<h3>Variables</h3>
		<ul>
			<li><code>variable.emitter_lifetime</code> Lifetime of the emitter</li>
			<li><code>variable.emitter_age</code> Age of the emitter</li>
			<li><code>variable.emitter_random_1</code> Random number between 0 and 1, constant per emitter loop</li>
			<li><code>variable.emitter_random_2</code> Random number</li>
			<li><code>variable.emitter_random_3</code> Random number</li>
			<li><code>variable.emitter_random_4</code> Random number</li>
			<li><code>variable.particle_lifetime</code> Lifetime of the particle</li>
			<li><code>variable.particle_age</code> Age of the particle</li>
			<li><code>variable.particle_random_1</code> Random number between 0 and 1, constant per particle</li>
			<li><code>variable.particle_random_2</code> Random number</li>
			<li><code>variable.particle_random_3</code> Random number</li>
			<li><code>variable.particle_random_4</code> Random number</li>
			<li><code>variable.entity_scale</code> Scale of the attached entity</li>
		</ul>
		<h3>Math Operations</h3>
		<ul>
			<li><code>Math.abs(n)</code> Returns the positive value of n.</li>
			<li><code>Math.sin(n)</code> Sine in degrees</li>
			<li><code>Math.cos(n)</code> Cosine in degrees</li>
			<li><code>Math.exp(n)</code> Calculates e to the nth power</li>
			<li><code>Math.ln(n)</code> Natural logarithm of n</li>
			<li><code>Math.pow(a, n)</code> Elevates a to the nth power</li>
			<li><code>Math.sqrt(n)</code> Returns the suare root of n.</li>
			<li><code>Math.random(a, b)</code> Random number between a and b</li>
			<li><code>Math.ceil(n)</code> Round n up to nearest integral number</li>
			<li><code>Math.round(n)</code> Round n to nearest integral number</li>
			<li><code>Math.trunc(n)</code> Round n towards zero</li>
			<li><code>Math.floor(n)</code> Round n down to nearest integral number</li>
			<li><code>Math.mod(a, b)</code> Returns the remainder of a/b.</li>
			<li><code>Math.min(n)</code> Return lowest value of a or b</li>
			<li><code>Math.max(n)</code> Return highest value of a or b</li>
			<li><code>Math.clamp(n, min, max)</code> Clamp n to between min and max inclusive</li>
			<li><code>Math.lerp(a, b, p)</code> Lerp between a and b using p (number between 0 and 1)</li>
			<li><code>Math.lerprotate(a, b, v)</code> Lerp the shortest direction around a circle from a degrees to b degrees via v.</li>
		</ul>
		<a href="https://bedrock.dev/1.12.0.0/1.12.0.4/MoLang">Full MoLang Documentation</a>
	</div>

	<header>
		<ul id="menu_bar">
			<li v-for="menu in bar">
				<a>{{ menu.label }}</a>
				<ul class="menu_dropdown">
					<li v-for="entry in menu.children" v-on:click="entry.click()">
						<a>{{ entry.label }}</a>
					</li>
				</ul>
			</li>
		</ul>
		<div id="expression_bar">
			<i class="fas fa-code"></i>
			<input type="text">
		</div>
	</header>
	<main>
		<canvas id="canvas"></canvas>
	</main>
	<footer>
		<div class="tool" onclick="startAnimation()"><i class="fas fa-play-circle"></i></div>
		<div class="tool" onclick="togglePause()"><i class="fas fa-pause-circle"></i></div>
		<div class="stat">{{fps}} FPS</div>
		<div class="stat">{{particles}} P</div>
	</footer>
	<content id="sidebar">
		<div id="sidebar_content">
			<h1>SNOWSTORM</h1>
			<div class="input_subject" v-for="(subject, subject_key) in data">
				<h3>{{ subject.label }}</h3>
				<div class="input_group" v-for="(group, group_key) in subject" v-if="typeof group === 'object'">
					<h4 v-on:click="fold(group)">{{ group.label }}</h4>
					<ul v-show="!group._folded" v-if="group.type == 'curves'">
						<li
							class="curve"
							v-for="curve in group.curves"
							v-bind:title="group.info"
							v-bind:id="subject_key +'-curves-'+ curve.uuid"
							v-bind:uuid="curve.uuid"
						>
							<input-group :group.sync="curve" :group_key.sync="group_key" :subject_key.sync="subject_key"></input-group>

							<div class="curve_display">
								<svg>
									<!--path d="M10,150 q160,-200 200,0 q60,-100 100,0" stroke="#3983ab" /-->
									<path class="curve_path" :d="curve.svg_data"/>
									<path class="vertical_line_path" :d="curve.vertical_line_data"/>
									<path class="horizontal_line_path" :d="curve.horizontal_line_data"/>
								</svg>
								<ul class="curve_controls">
									<li class="curve_add" :key="'add_0'" @click="curve.addNode(0, $event)"></li>
									<template v-for="(value, index) in curve.nodes">
										<li class="curve_node" :key="'node_'+index" @mousedown="curve.slideValue(index, $event)">
											<div class="curve_point" :style="{bottom: ((value-curve.min)/(curve.max-curve.min))*140 + 'px'}"><label>{{value}}</label></div>
											<div class="curve_node_remover tool" @click="curve.removeNode(index, $event)">
												<i class="fas fa-minus-circle"></i>
											</div>
										</li>
										<li class="curve_add" :key="'add_'+index+1" @click="curve.addNode(index+1, $event)"></li>
									</template>
								</ul>
								<div class="curve_max_num">{{curve.max}}</div>
								<div class="curve_min_num">{{curve.min}}</div>
							</div>
							<div class="tool" v-on:click="curve.remove()"><i class="fas fa-times-circle"></i></div>
						</li>
						<label>Add Curve</label>
						<div class="tool" v-on:click="addCurve()"><i class="fas fa-plus-circle"></i></div>
					</ul>
					<ul v-show="!group._folded" v-else>
						<input-group :group.sync="group" :group_key.sync="group_key" :subject_key.sync="subject_key"></input-group>
					</ul>
				</div>
			</div>
		</div>
	</content>
	<script type="text/javascript">
		
	</script>
</body>
</html>