<!DOCTYPE html>
<html lang="en">
<head>
	<title>Snowstorm Particle Generator</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="robots" content="noindex">
	<meta name="theme-color" content="#cfd7ea">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,700|Lato:300,400,700|Inconsolata" rel="stylesheet">

	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/fontawesome.css">
	<link rel="stylesheet" href="css/spectrum.css">
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/style.css">

	<script src="lib/jquery.js"></script>
	<script src="lib/jquery-ui.min.js"></script>
	<script src="lib/vue.min.js"></script>
	<script src="lib/vue-color.min.js"></script>
	<script src="lib/three.js"></script>
	<script src="lib/OrbitControls.js"></script>
	<script src="lib/spectrum.js"></script>
	<script src="lib/file_saver.js"></script>
	<script src="js/util.js"></script>
	<script src="js/molang.js"></script>

	<script src="js/general.js"></script>
	<script src="js/import.js"></script>
	<script src="js/export.js"></script>
	<script src="js/input.js"></script>
	<script src="js/preview.js"></script>


</head>
<body spellcheck="false">

	<div id="molang_sheet" class="dialog" style="display: none;">
		<h1>MoLang Sheet</h1>
		<h3>Variables</h3>
		<ul>
			<li><code>variable.emitter_lifetime</code> Lifetime of the emitter</li>
			<li><code>variable.emitter_age</code> Age of the emitter</li>
			<li><code>variable.emitter_random_1</code> Random number between 0 and 1, constant per emitter loop</li>
			<li><code>variable.emitter_random_2</code> Random number</li>
			<li><code>variable.emitter_random_3</code> Random number</li>
			<li><code>variable.emitter_random_4</code> Random number</li>
			<li><code>variable.particle_lifetime</code> Lifetime of the particle</li>
			<li><code>variable.particle_age</code> Age of the particle</li>
			<li><code>variable.particle_random_1</code> Random number between 0 and 1, constant per particle</li>
			<li><code>variable.particle_random_2</code> Random number</li>
			<li><code>variable.particle_random_3</code> Random number</li>
			<li><code>variable.particle_random_4</code> Random number</li>
			<li><code>variable.entity_scale</code> Scale of the attached entity</li>
		</ul>
		<h3>Math Operations</h3>
		<ul>
			<li><code>Math.abs(n)</code> Returns the positive value of n.</li>
			<li><code>Math.sin(n)</code> Sine in degrees</li>
			<li><code>Math.cos(n)</code> Cosine in degrees</li>
			<li><code>Math.exp(n)</code> Calculates e to the nth power</li>
			<li><code>Math.ln(n)</code> Natural logarithm of n</li>
			<li><code>Math.pow(a, n)</code> Elevates a to the nth power</li>
			<li><code>Math.sqrt(n)</code> Returns the suare root of n.</li>
			<li><code>Math.random(a, b)</code> Random number between a and b</li>
			<li><code>Math.ceil(n)</code> Round n up to nearest integral number</li>
			<li><code>Math.round(n)</code> Round n to nearest integral number</li>
			<li><code>Math.trunc(n)</code> Round n towards zero</li>
			<li><code>Math.floor(n)</code> Round n down to nearest integral number</li>
			<li><code>Math.mod(a, b)</code> Returns the remainder of a/b.</li>
			<li><code>Math.min(n)</code> Return lowest value of a or b</li>
			<li><code>Math.max(n)</code> Return highest value of a or b</li>
			<li><code>Math.clamp(n, min, max)</code> Clamp n to between min and max inclusive</li>
			<li><code>Math.lerp(a, b, p)</code> Lerp between a and b using p (number between 0 and 1)</li>
			<li><code>Math.lerprotate(a, b, v)</code> Lerp the shortest direction around a circle from a degrees to b degrees via v.</li>
		</ul>
		<a href="https://bedrock.dev/1.12.0.0/1.12.0.4/MoLang">Full MoLang Documentation</a>
	</div>

	<header>
		<ul id="menu_bar">
			<li v-for="menu in bar">
				<a>{{ menu.label }}</a>
				<ul class="menu_dropdown">
					<li v-for="entry in menu.children" v-on:click="entry.click()">
						<a>{{ entry.label }}</a>
					</li>
				</ul>
			</li>
		</ul>
		<div id="expression_bar">
			<i class="fas fa-code"></i>
			<input type="text">
		</div>
	</header>
	<main>
		<canvas id="canvas"></canvas>
	</main>
	<footer>
		<div class="tool" onclick="startAnimation()"><i class="fas fa-play-circle"></i></div>
		<div class="tool" onclick="togglePause()"><i class="fas fa-pause-circle"></i></div>
		<div class="stat">{{fps}} FPS</div>
		<div class="stat">{{particles}} P</div>
	</footer>
	<content id="sidebar">
		<h1>SNOWSTORM</h1>
		<div class="input_subject" v-for="(subject, subject_key) in data">
			<h3>{{ subject.label }}</h3>
			<div class="input_group" v-for="(group, group_key) in subject" v-if="typeof group === 'object'">
				<h4 v-on:click="fold(group)">{{ group.label }}</h4>
				<ul v-show="!group._folded">
					<li
						class="input_wrapper"
						v-for="(input, key) in group"
						v-if="input instanceof Input"
						v-show="!input.enabled_modes || group._selected_mode === null || input.enabled_modes.includes(group._selected_mode)"
						v-bind:title="input.info"
						v-bind:id="subject_key +'-'+ group_key +'-'+ key"
					>
						<label v-bind:for="key" v-if="input.label">{{ input.label }}</label>
						<template  v-if="input.type == 'list'">
							<!--List-->
							<div class="tool" v-on:click="input.value.push('')"><i class="fas fa-plus-circle"></i></div>
							<ul class="input_list">
								<li v-for="(item, index) in input.value">
									<input
										v-model="input.value[index]"
										v-bind:index="index"
										v-bind:placeholder="input.placeholder"
										v-on:input="input.change($event)"
										v-on:focus="input.focus(index, $event)">
									<div class="tool" v-on:click="input.value.remove(item)"><i class="fas fa-times-circle"></i></div>
								</li>
							</ul>
						</template>
						<div v-else class="input_right" v-bind:axes="input.axis_count">
							<template v-if="input.axis_count == 1">
								<!--Text-->
								<input
									v-if="input.type == 'text' || input.type == 'molang'"
									v-model="input.value"
									v-bind:placeholder="input.placeholder"
									v-on:input="input.change($event)"
									v-on:focus="input.focus(-1, $event)">
								<!--Number-->
								<input
									v-if="input.type == 'number'" type="number"
									v-model="input.value"
									v-on:input="input.change($event)">
							</template>
							<template v-else>
								<!--Text-->
								<input class="input_vector"
									v-if="input.type == 'text' || input.type == 'molang'"
									v-for="i in input.axis_count"
									v-model="input.value[i-1]"
									v-bind:index="i-1"
									v-bind:placeholder="input.placeholder"
									v-on:input="input.change($event)"
									v-on:focus="input.focus(i-1, $event)">
								<!--Number-->
								<input class="input_vector" type="number"
									v-for="i in input.axis_count"
									v-model="input.value[i-1]"
									v-bind:index="i-1"
									v-if="input.type == 'number'"
									v-on:input="input.change($event)">
							</template>
							<!--Check-->
							<input v-if="input.type == 'checkbox'" v-bind:id="key" type="checkbox" v-model="input.value">
							<!--Select-->
							<select v-if="input.type == 'select'" v-bind:id="key" v-model="input.meta_value" v-on:change="input.change($event)">
								<option v-for="(s_label, s_key) in input.options" v-bind:id="s_key">{{s_label}}</option>
							</select>
							<!--Color-->
							<color-picker v-if="input.type == 'color'" v-model="input.value" v-on:input="input.change($event)"></color-picker>
							<!--Image-->
							<div class="input_texture_preview" v-if="input.type == 'image'"></div>
							<input v-if="input.type == 'image'" v-bind:id="key" type="file" accept=".png" v-on:change="input.change($event)" v-model="input.value">
						</div>
					</li>
				</ul>
			</div>
		</div>
	</content>
</body>
</html>